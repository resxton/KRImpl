## Подготовка
1. Установите утилиту для создания виртуальных портов
```shell
brew install socat
```
2. Создайте 2 виртуальных порта
```shell
socat -d -d pty,raw,echo=0 pty,raw,echo=0
```
3. Примерный вывод команды:
```shell
2025/05/20 16:34:04 socat[61078] N PTY is /dev/ttys033
2025/05/20 16:34:04 socat[61078] N PTY is /dev/ttys034
2025/05/20 16:34:04 socat[61078] N starting data transfer loop with FDs [5,5] and [7,7]
```

## Запуск программы

### Способ 1: Интерактивный выбор порта
1. Откройте два терминала
2. В первом терминале запустите отправителя:
```shell
python3 sender.py
```
3. Во втором терминале запустите получателя:
```shell
python3 receiver.py
```
4. В каждом терминале выберите соответствующий порт из пары, созданной через socat

### Способ 2: Указание номера порта в командной строке
Можно указать номер порта непосредственно при запуске программы. Номер - это последние цифры в имени порта /dev/ttysXXX:

```shell
# Для порта /dev/ttys033
python3 sender.py 33

# Для порта /dev/ttys034
python3 receiver.py 34
```

## Работа с программой

### Доступные команды
- `connect <address>` - установить соединение с узлом
- `disconnect` - разорвать соединение
- `status` - показать статус соединения
- `config` - настроить параметры порта
- `help` - показать справку
- `exit` - выход из программы

Для отправки сообщения просто введите текст и нажмите Enter.

### Адресация
- Адреса узлов задаются в шестнадцатеричном формате: 0x00-0x7F
- Можно указывать как с префиксом 0x, так и без него
- Регистр не имеет значения (0x1A = 0x1a = 1a)
- Отправителю автоматически назначается случайный адрес из диапазона 0x40-0x7E

### Параметры соединения
- Таймаут соединения: 30 секунд
- Количество попыток переподключения: 3
- При отсутствии активности соединение автоматически разрывается
- Каждое сообщение требует подтверждения получения
- Все данные защищаются кодом Хэмминга

### Настройка параметров порта
Через команду `config` можно настроить:
- Скорость обмена (бод): 300, 1200, 2400, 4800, 9600, 19200, 38400, 57600, 115200
- Биты данных: 5-8
- Четность: N (нет), E (четный), O (нечетный)
- Стоп-биты: 1, 1.5, 2
- Таймаут чтения (сек)

### Процесс обмена сообщениями
1. Запустите отправителя и получателя на разных портах
2. В обоих терминалах выполните команду `connect <address>`
   - `<address>` не чувствителен к регистру
3. После установки соединения можно обмениваться сообщениями:
   - Отправитель видит статус доставки каждого сообщения
   - Получатель автоматически подтверждает получение
   - При потере связи происходит автоматическое переподключение
   - Все сообщения защищены кодом Хэмминга

### Особенности работы
- Программа поддерживает как физические, так и виртуальные COM-порты
- Адреса узлов задаются в шестнадцатеричном формате (0x00-0x7F)
- Поддерживается установка никнеймов для удобства идентификации
- Реализована защита от потери данных и искажений
- Есть система повторной отправки при ошибках
- Таймауты соединения настраиваются через конфигурацию

### Формат вывода
- Зеленым цветом выводятся сообщения об успешных операциях
- Желтым - предупреждения и статусы
- Красным - ошибки
- Входящие сообщения отображаются с никнеймом отправителя
- В строке статуса показывается текущее состояние соединения

### Пример сессии
```shell
# Терминал 1 (Отправитель)
> connect
[CONNECTING to 0x02...]
[CONNECTED to Bob] Соединение установлено!
> Привет, как дела?
[OK] Сообщение доставлено
> disconnect
[DISCONNECTING from Bob...]
[DISCONNECTED] Соединение закрыто

# Терминал 2 (Получатель)
[CONNECTED from Alice] Соединение установлено!
Alice: Привет, как дела?
> Все хорошо!
[OK] Сообщение доставлено
[DISCONNECTED from Alice] Соединение закрыто
```

Из него взять номера портов ```/dev/ttysN``` и выбрать при запуске программы, например: 
```shell
# Терминал 1 (Отправитель)
> connect
[CONNECTING to 0x02...]
[CONNECTED to Bob] Соединение установлено!
> Привет, как дела?
[OK] Сообщение доставлено
> disconnect
[DISCONNECTING from Bob...]
[DISCONNECTED] Соединение закрыто

# Терминал 2 (Получатель)
[CONNECTED from Alice] Соединение установлено!
Alice: Привет, как дела?
> Все хорошо!
[OK] Сообщение доставлено
[DISCONNECTED from Alice] Соединение закрыто
```

В ```sender.py``` и ```receiver.py``` порты выбираем спаренные (в примере это 33 и 34)
